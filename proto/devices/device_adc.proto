syntax = "proto3";

package ringbahn.v1;

import "devices/device_common.proto";

// Top-level ADC device command message
message ADCDeviceCommand {
  oneof command {
    // Common commands
    SystemInfoRequest system_info = 1; // Response: SystemInfoResponse
    PingCommand ping = 2; // Response: CommandResult
    ResetCommand reset = 3; // Response: CommandResult
    
    // ADC-specific commands
    ADCGetStateRequest get_state = 10; // Response: ADCState
  }
}

// ===== ADC-Specific Commands =====

// Response: ADCState
message ADCGetStateRequest {
  // Empty - reads all channels
}

// Single ADC channel reading
message ADCCurrentChannelValue {
  int32 channel_number = 1; // Channel number;
  float current_ma = 2; // Current in milliamps;
  bool open_line_detected = 3; // Indicates if an open line is detected;
}

// Single ADC voltage channel reading
message ADCVoltageChannelValue {
  int32 channel_number = 1; // Channel number;
  float voltage_mv = 2; // Voltage in millivolts;
}

// Complete ADC device state
message ADCState {
  int64 timestamp_ms = 1; // When state was captured (milliseconds since epoch);
  repeated ADCCurrentChannelValue current_values = 2; // ADC channel values;
  repeated ADCVoltageChannelValue voltage_values = 3; // Voltage channel values;
}
