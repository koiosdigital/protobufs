syntax = "proto3";

package ringbahn.v1;

import "devices/device_common.proto";

// Top-level Rover device command message
message RoverDeviceCommand {
  oneof command {
    // Common commands
    SystemInfoRequest system_info = 1; // Response: SystemInfoResponse
    PingCommand ping = 2; // Response: CommandResult
    
    // Rover-specific commands
    RoverMovementCommand movement = 10; // Response: AcknowledgeResponse
    RoverGetStateRequest get_state = 11; // Response: RoverDeviceState
  }
}

// ===== Rover-Specific Commands =====

// Response: RoverDeviceState
message RoverGetStateRequest {}

// Current rover device state
message RoverDeviceState {
  int64 timestamp_ms = 1; // When state was captured (milliseconds since epoch);
  bool tracks_active = 2; // Indicates if the rover tracks are active;
  sint32 left_right = 3; // Left-right: -100 (full left) to +100 (full right), 0 = straight;
  sint32 forward_backward = 4; // Forward-backward: -100 (full reverse) to +100 (full forward), 0 = stopped;
}

// Response: AcknowledgeResponse
message RoverMovementCommand {
  bool tracks_active = 1; // Indicates if the rover tracks are active;
  sint32 left_right = 2; // Left-right: -100 (full left) to +100 (full right), 0 = straight;
  sint32 forward_backward = 3; // Forward-backward: -100 (full reverse) to +100 (full forward), 0 = stopped;
}
